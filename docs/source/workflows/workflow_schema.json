{"description": "Advanced workflow schema", "minProperties": 2, "title": "Workflow", "additionalProperties": false, "definitions": {"workflow_task_schema": {"additionalProperties": false, "required": ["name", "url", "identifier"], "type": "object", "description": "Describe a WPS process task", "properties": {"inputs": {"minItems": 1, "patternProperties": {".*": {"oneOf": [{"type": "string", "description": "Data that must be fed to this input"}, {"minItems": 1, "items": {"type": "string"}, "type": "array", "description": "Array of data that must be fed to this input"}]}}, "type": "object", "description": "Dictionary of inputs that must be fed to the WPS process"}, "name": {"type": "string", "description": "Unique name given to each workflow task"}, "url": {"type": "string", "description": "Url of the WPS provider"}, "linked_inputs": {"minItems": 1, "patternProperties": {".*": {"oneOf": [{"$ref": "#/definitions/input_description_schema"}, {"minItems": 1, "items": {"$ref": "#/definitions/input_description_schema"}, "type": "array", "description": "Array of input description that must be fed to this input"}]}}, "type": "object", "description": "Dictionary of dynamic inputs that must be fed to the WPS process and obtained by the output of other tasks"}, "identifier": {"type": "string", "description": "Identifier of a WPS process"}, "progress_range": {"minItems": 2, "items": {"minimum": 0, "type": "number", "maximum": 100}, "type": "array", "description": "Progress range to map the whole progress of this task", "maxItems": 2}}}, "input_description_schema": {"additionalProperties": false, "required": ["task"], "type": "object", "description": "Description of an input source", "properties": {"output": {"type": "string", "description": "Task output name"}, "as_reference": {"type": "boolean", "description": "Specify if the task output should be obtained as a reference or not"}, "task": {"type": "string", "description": "Task name"}}}, "group_of_task_schema": {"additionalProperties": false, "required": ["name", "max_processes", "map", "reduce", "tasks"], "type": "object", "description": "Describe a group of tasks to be run concurrently", "properties": {"max_processes": {"minimum": 1, "type": "number", "description": "Number of processes to run concurrently to process the data"}, "tasks": {"minItems": 1, "items": {"$ref": "#/definitions/workflow_task_schema"}, "type": "array", "description": "Array of workflow task to run concurrently inside the group"}, "reduce": {"$ref": "#/definitions/input_description_schema"}, "name": {"type": "string", "description": "Group of task name"}, "map": {"oneOf": [{"$ref": "#/definitions/input_description_schema"}, {"minItems": 1, "items": {"type": "string"}, "type": "array", "description": "Array of data that has to be mapped directly"}]}}}}, "$schema": "http://json-schema.org/draft-04/schema#", "required": ["name"], "type": "object", "properties": {"tasks": {"minItems": 1, "items": {"$ref": "#/definitions/workflow_task_schema"}, "type": "array", "description": "Array of workflow task"}, "name": {"type": "string", "description": "Workflow name"}, "parallel_groups": {"minItems": 1, "items": {"$ref": "#/definitions/group_of_task_schema"}, "type": "array", "description": "Array of group of tasks being executed on multiple processes"}}}